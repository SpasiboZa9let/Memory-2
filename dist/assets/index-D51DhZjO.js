function l(n,t=document){return t.querySelector(n)}class a{constructor(t,i,e){if(this.mapEl=l(t),this.markers=i,this.panel=e,!this.mapEl){console.error(`Map container "${t}" not found`);return}this.mapEl.style.position="relative",this._onResize=this._renderMarkers.bind(this),window.addEventListener("resize",this._onResize),this._renderMarkers()}_renderMarkers(){this.mapEl.querySelectorAll(".marker").forEach(e=>e.remove());const{width:t,height:i}=this.mapEl.getBoundingClientRect();this.markers.forEach(e=>{if(e.x<0||e.x>1||e.y<0||e.y>1)return;const s=document.createElement("div");s.className="marker",s.style.left=`${e.x*t}px`,s.style.top=`${e.y*i}px`,s.style.backgroundImage=`url(${e.img})`,s.title=e.title,s.onclick=()=>{var r;return((r=this.panel)==null?void 0:r.ready)&&this.panel.show(e)},this.mapEl.appendChild(s)})}destroy(){window.removeEventListener("resize",this._onResize)}}class c{constructor(t){this.panel=document.querySelector(t),this.img=document.createElement("img"),this.caption=document.createElement("div"),this.panel.appendChild(this.img),this.panel.appendChild(this.caption),this.panel.style.display="none",this.ready=!0}show(t){this.ready&&(this.ready=!1,this.img.src=t.img,this.caption.textContent=t.title||"Без подписи",this.panel.style.display="block",setTimeout(()=>{this.ready=!0},3e3))}hide(){this.panel.style.display="none",this.ready=!0}}class h{constructor(t,i,e){this.bar=document.querySelector(i),this.btn=document.querySelector(e),console.log("Прогрессбар инициализирован")}}const o=[{x:.5,y:.5,img:"photos/1.jpg",title:"Пример"}];function d(){console.log("Рисуем маршрут (заглушка)")}class p{constructor(){this.enabled=!1}initOnce(){this.enabled=!0,console.log("Звук включён")}toggle(){return this.enabled=!this.enabled,this.enabled}}function u(){const n=new c("#memory-panel");new a("#map",o,n),new h(o.length,"#progress-bar","#open-album"),d();const t=new p;document.addEventListener("click",()=>t.initOnce(),{once:!0})}export{u as initMap};
